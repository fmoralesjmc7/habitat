<app-header titulo="Tus Datos" [showMenuHamb]="!modoEdicion" (clickBackButton)="volverAlHome()" ></app-header>

<ion-content class="content_page">

  <section *ngIf="!modoEdicion">
    <ion-card class="datos-contacto" [class.datos-sin-residencia]="datosUsuario?.opcionResidenciaChile === false">
      <span class="datos-editar" (click)="editarDatos()">
        <ion-icon class="icon icon-editar-lapiz"></ion-icon>
      </span>
  
      <ion-grid class="datos-formulario" *ngIf="datosUsuario">
        <ion-row>
          <ion-col>
            <p class="titulo">Datos de Contacto</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
              <p class="label primero">Teléfono Particular</p>
              <ng-container *ngIf="datosUsuario.telefonoParticular.numero_telefono; else sinDatos">
                <p class="dato">+56 {{datosUsuario.telefonoParticular.codigo_area}} {{datosUsuario.telefonoParticular.numero_telefono}}</p>
              </ng-container>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
              <p class="label">Teléfono Comercial</p>
              <ng-container *ngIf="datosUsuario.telefonoComercial.numero_telefono; else sinDatos">
                <p class="dato">+56 {{datosUsuario.telefonoComercial.codigo_area}} {{datosUsuario.telefonoComercial.numero_telefono}}</p>
              </ng-container>
            </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
              <p class="label">Celular</p>
              <ng-container *ngIf="datosUsuario.celularUsuario.numero_telefono; else sinDatos">
                <p class="dato">+56 {{datosUsuario.celularUsuario.codigo_area}} {{datosUsuario.celularUsuario.numero_telefono}}</p>
              </ng-container>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
              <p class="label">Email Particular</p>
              <ng-container *ngIf="datosUsuario.correoParticular.correo; else sinDatos">
                <p class="dato">{{datosUsuario.correoParticular.correo}}</p>
              </ng-container>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
              <p class="label">Email Comercial</p>
              <ng-container *ngIf="datosUsuario.correoComercial.correo; else sinDatos">
                <p class="dato">{{datosUsuario.correoComercial.correo}}</p>
              </ng-container>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
              <p class="suscripcion">Email al que desea suscribir para envío de Cartola Cuatrimestral</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col class="checkbox" size="6">
            <ion-checkbox [(ngModel)]="datosUsuario.esSuscripcionCorreoParticular" [disabled]="true" mode="md"
                class="checkbox-custom"></ion-checkbox>
            <span>Email Particular</span>
          </ion-col>
          <ion-col class="checkbox" size="6">
            <ion-checkbox [(ngModel)]="datosUsuario.esSuscripcionCorreoComercial" [disabled]="true" mode="md"
                class="checkbox-custom"></ion-checkbox>
            <span>Email Comercial</span>
        </ion-col>
        </ion-row>
      </ion-grid>

      <ion-grid class="datos-formulario" *ngIf="datosUsuario">
        <ion-row>
          <ion-col>
            <ion-row>
                <ion-col>
                  <p class="titulo residencia">Datos de Residencia</p>
                </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-radio-group class="residencia" value="{{datosUsuario.opcionResidenciaChile}}">
              <ion-row>
                  <ion-col size="1">
                    <ion-radio class="radio-custom" value="true" mode="md" [disabled]="true"></ion-radio>
                  </ion-col>
                  
                  <ion-col size="5">
                    <span>Chile</span>
                  </ion-col>
          
                  <ion-col size="1">
                    <ion-radio class="radio-custom" value="false" mode="md" [disabled]="true"></ion-radio>
                  </ion-col>
          
                  <ion-col size="5">
                    <span>No residente</span>
                  </ion-col>
              </ion-row>
            </ion-radio-group>
          </ion-col>
        </ion-row>
        <section *ngIf="datosUsuario.opcionResidenciaChile">
          <ion-row>
            <ion-col>
                <p class="label">Nacionalidad</p>
                <ng-container *ngIf="datosUsuario.nacionalidad; else sinDatos">
                  <p class="dato">{{datosUsuario.nacionalidad}}</p>
                </ng-container>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
                <p class="label">Región</p>
                <ng-container *ngIf="direccionSeleccionada.nombre_region; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.nombre_region}}</p>
                </ng-container>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
                <p class="label">Ciudad</p>
                <ng-container *ngIf="direccionSeleccionada.nombre_ciudad; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.nombre_ciudad}}</p>
                </ng-container>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
                <p class="label">Comuna</p>
                <ng-container *ngIf="direccionSeleccionada.nombre_comuna; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.nombre_comuna}}</p>
                </ng-container>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
                <p class="label">Calle</p>
                <ng-container *ngIf="direccionSeleccionada.calle; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.calle}}</p>
                </ng-container>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
                <p class="label">Número</p>
                <ng-container *ngIf="direccionSeleccionada.numero; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.numero}}</p>
                </ng-container>
            </ion-col>
            <ion-col>
                <p class="label">Depto.</p>
                <ng-container *ngIf="direccionSeleccionada.departamento; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.departamento}}</p>
                </ng-container>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
                <p class="label">Block</p>
                <ng-container *ngIf="direccionSeleccionada.block; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.block}}</p>
                </ng-container>
            </ion-col>
            <ion-col>
                <p class="label">Villa/Población</p>
                <ng-container *ngIf="direccionSeleccionada.villa; else sinDatos">
                  <p class="dato">{{direccionSeleccionada.villa}}</p>
                </ng-container>
            </ion-col>
          </ion-row>
        </section>
      </ion-grid>
    </ion-card>
    
    <section class="botonera">
      <button class="buttons-btn" (click)="volverAlHome()">Volver</button>
    </section>
  </section>
  

  <!--Componente despliegue de edición de datos de contacto-->
  <section class="content_page" *ngIf="modoEdicion">
    <app-formulario-edicion-contacto 
      (volverVisualizar)="volverVisualizar()"
      [datosUsuario]="datosUsuarioInput" 
      [direccionSeleccionada]="direccionSeleccionadaInput" 
      [listadoRegiones]="listadoRegiones"
      [listadoComunas]="listadoComunas"
      [listadoCiudades]="listadoCiudades"
      [listadoComunasVisibles]="listadoComunasVisibles"
      [listadoCiudadesVisibles]="listadoCiudadesVisibles"
      [listadoCodigosArea]="listadoCodigosArea"
      [listadoNacionalidad]="listadoNacionalidad">
    </app-formulario-edicion-contacto>
  </section>
</ion-content>


<ng-template #sinDatos><p class="dato">-</p></ng-template>

<section class="modal_informativo" *ngIf="modalSinCelularValido">
  <article class="modal_cnt">
    <ion-icon class="icon_close icon-cerrar" (click)="modalSinCelularValido = false"></ion-icon>
    <ion-card class="modal alerta">
      <ion-card-header class="header">
        <ion-icon class="header-icon icon-informacion"></ion-icon>
      </ion-card-header>
      <ion-card-content class="body">
        <h3 class="body-title">
          Sin Número de Celular válido
        </h3>
        <p class="body-text">
          No tienes registrado número de celular válido para realizar la actualización de datos.
          Regístralo en cualquiera de nuestras <a class="link"
          (click)="irSucursales()">Sucursales</a> o llama a nuestro <a class="link"
            (click)="llamarContactCenter()"> Contact Center.</a>
        </p>
        <button class="body-btn" (click)="modalSinCelularValido = false">Aceptar</button>
      </ion-card-content>
    </ion-card>
  </article>
</section>
